<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>alen - å…ƒæ—¦æ™šä¼šç‰¹åˆ«ç‰ˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="shortcut icon" href="favicon.ico" />
  <style>
    /* åŸæœ‰æ ·å¼ä¿æŒä¸å˜ */
    body {
      font-family: 'Rubik', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      font-size: calc(10px + 0.33vw);
      -webkit-font-smoothing: antialiased;
      padding: 5vh 10vw;
      color: #ffffff;
      margin: 0;
      background-color: #121314;
      overflow-x: hidden;
    }
    
    h1 {
      font-size: 4.5em;
      font-weight: 500;
      margin-bottom: 0;
    }
    
    p {
      font-size: 1.6em;
      font-weight: 300;
      line-height: 1.4;
      max-width: 26em;
    }
    
    a {
      text-decoration: none;
      color: #ffffff;
      position: relative;
    }
    
    a:after {
      content: "";
      position: absolute;
      z-index: -1;
      top: 60%;
      left: -0.1em;
      right: -0.1em;
      bottom: 0;
      transition: top 200ms cubic-bezier(0, .8, .13, 1);
      background-color: rgba(255,255,255,0.5);
    }
    
    a:hover:after {
      top: 0%;
    }

    #cas {
      position: fixed;
      left:0;
      top:0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    
    .control-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(79, 192, 141, 0.8);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1.2em;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }
    
    .control-btn:hover {
      background: rgba(79, 192, 141, 1);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 192, 141, 0.4);
    }
    
    .slide-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 380px;
      height: 100vh;
      background: rgba(18, 20, 21, 0.95);
      z-index: 999;
      padding: 20px;
      overflow-y: auto;
      transition: right 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      border-left: 2px solid rgba(79, 192, 141, 0.5);
      backdrop-filter: blur(10px);
      box-shadow: -5px 0 30px rgba(0,0,0,0.5);
    }
    
    .slide-panel.active {
      right: 0;
    }
    
    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: rgba(79, 192, 141, 1);
      font-size: 24px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      background: rgba(79, 192, 141, 0.2);
      transform: rotate(90deg);
    }
    
    .panel-title {
      font-size: 2.5em;
      margin-bottom: 30px;
      color: rgba(79, 192, 141, 1);
      text-align: center;
      position: relative;
      padding-bottom: 10px;
    }
    
    .panel-title:after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background: linear-gradient(90deg, transparent, rgba(79, 192, 141, 1), transparent);
    }
    
    /* æ ‡ç­¾é¡µå¯¼èˆª */
    .tab-nav {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 10px;
    }
    
    .tab-btn {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.2em;
      padding: 8px 15px;
      cursor: pointer;
      border-radius: 20px;
      transition: all 0.3s ease;
    }
    
    .tab-btn:hover {
      color: rgba(79, 192, 141, 1);
      background: rgba(79, 192, 141, 0.1);
    }
    
    .tab-btn.active {
      color: rgba(79, 192, 141, 1);
      background: rgba(79, 192, 141, 0.2);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* å€’è®¡æ—¶éƒ¨åˆ† */
    .countdown-section {
      background: rgba(30, 33, 35, 0.8);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      border: 1px solid rgba(79, 192, 141, 0.3);
    }
    
    .countdown-title {
      font-size: 1.8em;
      margin-bottom: 15px;
      color: white;
      text-align: center;
    }
    
    .countdown-display {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .countdown-unit {
      text-align: center;
      background: rgba(79, 192, 141, 0.2);
      border-radius: 10px;
      padding: 10px 5px;
      min-width: 70px;
    }
    
    .countdown-value {
      font-size: 2.5em;
      font-weight: bold;
      color: rgba(79, 192, 141, 1);
      display: block;
    }
    
    .countdown-label {
      font-size: 0.9em;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 5px;
    }
    
    .countdown-note {
      text-align: center;
      font-size: 1.1em;
      color: rgba(255, 255, 255, 0.8);
      font-style: italic;
    }
    
    /* èŠ‚ç›®å•éƒ¨åˆ† */
    .program-section {
      background: rgba(30, 33, 35, 0.8);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(79, 192, 141, 0.3);
    }
    
    .program-title {
      font-size: 1.8em;
      margin-bottom: 15px;
      color: white;
      text-align: center;
    }
    
    .program-list {
      list-style-type: none;
      padding: 0;
    }
    
    .program-item {
      padding: 12px 15px;
      margin-bottom: 10px;
      background: rgba(40, 44, 46, 0.8);
      border-radius: 10px;
      border-left: 4px solid rgba(79, 192, 141, 0.5);
      transition: all 0.3s ease;
    }
    
    .program-item:hover {
      background: rgba(50, 54, 56, 0.9);
      transform: translateX(5px);
    }
    
    .program-item.active {
      border-left: 4px solid rgba(79, 192, 141, 1);
      background: rgba(50, 54, 56, 1);
      box-shadow: 0 0 15px rgba(79, 192, 141, 0.3);
    }
    
    .program-time {
      font-weight: bold;
      color: rgba(79, 192, 141, 1);
      margin-bottom: 5px;
    }
    
    .program-name {
      font-size: 1.2em;
      color: white;
    }
    
    .program-performer {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9em;
      margin-top: 5px;
    }
    
    /* æ¸¸æˆéƒ¨åˆ†æ ·å¼ */
    .games-section {
      background: rgba(30, 33, 35, 0.8);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(79, 192, 141, 0.3);
    }
    
    .games-title {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: white;
      text-align: center;
    }
    
    .game-selector {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      gap: 10px;
    }
    
    .game-btn {
      flex: 1;
      background: rgba(40, 44, 46, 0.8);
      border: 2px solid rgba(79, 192, 141, 0.3);
      color: rgba(255, 255, 255, 0.8);
      padding: 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1em;
      transition: all 0.3s ease;
    }
    
    .game-btn:hover {
      background: rgba(79, 192, 141, 0.2);
      border-color: rgba(79, 192, 141, 0.7);
      transform: translateY(-3px);
    }
    
    .game-btn.active {
      background: rgba(79, 192, 141, 0.3);
      border-color: rgba(79, 192, 141, 1);
      color: white;
    }
    
    .game-container {
      background: rgba(40, 44, 46, 0.8);
      border-radius: 10px;
      padding: 20px;
      min-height: 300px;
      border: 1px solid rgba(79, 192, 141, 0.2);
    }
    
    /* çŒœæ•°å­—æ¸¸æˆæ ·å¼ */
    .guess-game {
      text-align: center;
    }
    
    .guess-title {
      font-size: 1.5em;
      margin-bottom: 15px;
      color: rgba(79, 192, 141, 1);
    }
    
    .guess-instruction {
      margin-bottom: 20px;
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.5;
    }
    
    .guess-input {
      width: 100%;
      padding: 12px;
      font-size: 1.2em;
      background: rgba(30, 33, 35, 0.9);
      border: 2px solid rgba(79, 192, 141, 0.5);
      border-radius: 8px;
      color: white;
      text-align: center;
      margin-bottom: 15px;
    }
    
    .guess-btn {
      background: linear-gradient(135deg, rgba(79, 192, 141, 0.8), rgba(59, 172, 121, 0.8));
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1.1em;
      font-weight: bold;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }
    
    .guess-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(79, 192, 141, 0.4);
    }
    
    .guess-result {
      background: rgba(30, 33, 35, 0.9);
      padding: 15px;
      border-radius: 8px;
      min-height: 80px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .guess-history {
      margin-top: 15px;
      text-align: left;
    }
    
    .history-item {
      padding: 5px 10px;
      margin-bottom: 5px;
      background: rgba(30, 33, 35, 0.7);
      border-radius: 5px;
      border-left: 3px solid rgba(79, 192, 141, 0.5);
    }
    
    /* ååº”æµ‹è¯•æ¸¸æˆæ ·å¼ */
    .reaction-game {
      text-align: center;
    }
    
    .reaction-title {
      font-size: 1.5em;
      margin-bottom: 15px;
      color: rgba(79, 192, 141, 1);
    }
    
    .reaction-instruction {
      margin-bottom: 20px;
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.5;
    }
    
    .reaction-btn {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(255, 87, 87, 0.9), rgba(255, 120, 120, 0.9));
      color: white;
      border: none;
      font-size: 1.5em;
      font-weight: bold;
      cursor: pointer;
      margin: 20px auto;
      transition: all 0.1s ease;
      display: block;
    }
    
    .reaction-btn.active {
      background: linear-gradient(135deg, rgba(79, 192, 141, 0.9), rgba(59, 172, 121, 0.9));
      transform: scale(1.05);
    }
    
    .reaction-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }
    
    .stat-item {
      text-align: center;
      background: rgba(30, 33, 35, 0.7);
      padding: 10px 15px;
      border-radius: 8px;
      min-width: 80px;
    }
    
    .stat-value {
      font-size: 1.8em;
      font-weight: bold;
      color: rgba(79, 192, 141, 1);
      display: block;
    }
    
    .stat-label {
      font-size: 0.9em;
      color: rgba(255, 255, 255, 0.7);
    }
    
    /* æ‰“åœ°é¼ æ¸¸æˆæ ·å¼ */
    .whack-game {
      text-align: center;
    }
    
    .whack-title {
      font-size: 1.5em;
      margin-bottom: 15px;
      color: rgba(79, 192, 141, 1);
    }
    
    .whack-instruction {
      margin-bottom: 20px;
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.5;
    }
    
    .whack-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
      margin-bottom: 20px;
    }
    
    .whack-hole {
      aspect-ratio: 1;
      background: rgba(60, 40, 20, 0.8);
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    .whack-mole {
      position: absolute;
      width: 80%;
      height: 80%;
      background: rgba(140, 90, 60, 0.9);
      border-radius: 50%;
      top: 100%;
      left: 10%;
      transition: top 0.3s ease;
    }
    
    .whack-mole.active {
      top: 10%;
      background: rgba(180, 120, 80, 0.9);
    }
    
    .whack-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
    }
    
    .whack-btn {
      background: linear-gradient(135deg, rgba(79, 192, 141, 0.8), rgba(59, 172, 121, 0.8));
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 1em;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    
    .whack-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(79, 192, 141, 0.4);
    }
    
    /* å†’æ­»è·å–æç¤º */
    .risk-note {
      text-align: center;
      font-size: 1em;
      color: rgba(255, 100, 100, 0.8);
      margin-top: 20px;
      padding: 10px;
      border: 1px dashed rgba(255, 100, 100, 0.5);
      border-radius: 10px;
      background: rgba(255, 100, 100, 0.1);
    }
    
    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 768px) {
      .slide-panel {
        width: 320px;
        right: -340px;
      }
      
      .countdown-unit {
        min-width: 60px;
      }
      
      .countdown-value {
        font-size: 2em;
      }
      
      .reaction-btn {
        width: 120px;
        height: 120px;
      }
    }
    
    @media (max-width: 480px) {
      .slide-panel {
        width: 280px;
        right: -300px;
      }
      
      .control-btn {
        padding: 10px 15px;
        font-size: 1em;
      }
      
      .tab-btn {
        padding: 6px 10px;
        font-size: 1em;
      }
      
      .game-selector {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <h1>alen</h1>
  <p style="font-weight:500; font-size:2.2em">
    ä½ å¥½ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„ç½‘ç«™
  </p>
  <p>
    è¿™æ˜¯æˆ‘çš„bç«™è¿æ¥
  </p>
  <a href="http://space.bilibili.com" target="_blank" class="main">Bç«™ç©ºé—´</a>
  
  <!-- æ§åˆ¶é¢æ¿æŒ‰é’® -->
  <button class="control-btn" id="panelToggle">ğŸ‰ å…ƒæ—¦æ™šä¼š ğŸ‰</button>
  
  <!-- æ»‘åŠ¨é¢æ¿ -->
  <div class="slide-panel" id="slidePanel">
    <button class="close-btn" id="closePanel">Ã—</button>
    
    <h2 class="panel-title">å…ƒæ—¦æ™šä¼šç‰¹åˆ«ç‰ˆ</h2>
    
    <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
    <div class="tab-nav">
      <button class="tab-btn active" data-tab="countdown">å€’è®¡æ—¶</button>
      <button class="tab-btn" data-tab="program">èŠ‚ç›®å•</button>
      <button class="tab-btn" data-tab="games">å°æ¸¸æˆ</button>
    </div>
    
    <!-- å€’è®¡æ—¶æ ‡ç­¾é¡µ -->
    <div class="tab-content active" id="countdown-tab">
      <div class="countdown-section">
        <div class="countdown-title">è·ç¦»å…ƒæ—¦æ™šä¼šå¼€å§‹è¿˜æœ‰</div>
        <div class="countdown-display">
          <div class="countdown-unit">
            <span class="countdown-value" id="days">00</span>
            <span class="countdown-label">å¤©</span>
          </div>
          <div class="countdown-unit">
            <span class="countdown-value" id="hours">00</span>
            <span class="countdown-label">æ—¶</span>
          </div>
          <div class="countdown-unit">
            <span class="countdown-value" id="minutes">00</span>
            <span class="countdown-label">åˆ†</span>
          </div>
          <div class="countdown-unit">
            <span class="countdown-value" id="seconds">00</span>
            <span class="countdown-label">ç§’</span>
          </div>
        </div>
        <div class="countdown-note">å‡†å¤‡å¥½è¿æ¥ç‹‚æ¬¢ä¹‹å¤œäº†å—ï¼Ÿ</div>
      </div>
    </div>
    
    <!-- èŠ‚ç›®å•æ ‡ç­¾é¡µ -->
    <div class="tab-content" id="program-tab">
      <div class="program-section">
        <div class="program-title">æ™šä¼šèŠ‚ç›®å•</div>
        <ul class="program-list" id="programList">
          <!-- èŠ‚ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </ul>
        <div class="risk-note">
          âš ï¸ èŠ‚ç›®å•æ­£åœ¨å†’æ­»è·å–ä¸­...<br>
          æœ€æ–°æƒ…æŠ¥å°†éšæ—¶æ›´æ–°ï¼
        </div>
      </div>
    </div>
    
    <!-- æ¸¸æˆæ ‡ç­¾é¡µ -->
    <div class="tab-content" id="games-tab">
      <div class="games-section">
        <div class="games-title">æ™šä¼šå°æ¸¸æˆ</div>
        
        <div class="game-selector">
          <button class="game-btn active" data-game="guess">çŒœæ•°å­—</button>
          <button class="game-btn" data-game="reaction">ååº”æµ‹è¯•</button>
          <button class="game-btn" data-game="whack">æ‰“åœ°é¼ </button>
        </div>
        
        <!-- çŒœæ•°å­—æ¸¸æˆ -->
        <div class="game-container guess-game active" id="guess-game">
          <div class="guess-title">çŒœæ•°å­—æ¸¸æˆ</div>
          <div class="guess-instruction">
            æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ã€‚<br>
            è¯•è¯•çœ‹ä½ èƒ½çŒœå‡ æ¬¡çŒœä¸­ï¼Ÿ
          </div>
          <input type="number" min="1" max="100" class="guess-input" id="guess-input" placeholder="è¾“å…¥1-100ä¹‹é—´çš„æ•°å­—">
          <button class="guess-btn" id="guess-submit">çŒœï¼</button>
          <button class="guess-btn" id="guess-restart" style="background: rgba(255, 87, 87, 0.8);">é‡æ–°å¼€å§‹</button>
          <div class="guess-result">
            <div id="guess-message">ç­‰å¾…ä½ çš„ç¬¬ä¸€æ¬¡çŒœæµ‹...</div>
            <div class="guess-history" id="guess-history"></div>
          </div>
        </div>
        
        <!-- ååº”æµ‹è¯•æ¸¸æˆ -->
        <div class="game-container reaction-game" id="reaction-game">
          <div class="reaction-title">ååº”é€Ÿåº¦æµ‹è¯•</div>
          <div class="reaction-instruction">
            å½“æŒ‰é’®å˜æˆç»¿è‰²æ—¶ï¼Œå°½å¿«ç‚¹å‡»å®ƒï¼<br>
            æµ‹è¯•ä½ çš„ååº”é€Ÿåº¦æœ‰å¤šå¿«ã€‚
          </div>
          <button class="reaction-btn" id="reaction-btn">ç­‰å¾…...</button>
          <div class="reaction-stats">
            <div class="stat-item">
              <span class="stat-value" id="reaction-time">0</span>
              <span class="stat-label">æœ€å¿«(ms)</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="reaction-average">0</span>
              <span class="stat-label">å¹³å‡(ms)</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="reaction-count">0</span>
              <span class="stat-label">æ¬¡æ•°</span>
            </div>
          </div>
          <button class="guess-btn" id="reaction-reset" style="margin-top: 20px;">é‡ç½®è®°å½•</button>
        </div>
        
        <!-- æ‰“åœ°é¼ æ¸¸æˆ -->
        <div class="game-container whack-game" id="whack-game">
          <div class="whack-title">æ‰“åœ°é¼ </div>
          <div class="whack-instruction">
            ç‚¹å‡»å†’å‡ºæ¥çš„åœ°é¼ ï¼<br>
            æ¸¸æˆæ—¶é—´ï¼š30ç§’
          </div>
          <div class="whack-stats">
            <div class="stat-item">
              <span class="stat-value" id="whack-score">0</span>
              <span class="stat-label">åˆ†æ•°</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="whack-time">30</span>
              <span class="stat-label">æ—¶é—´</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="whack-highscore">0</span>
              <span class="stat-label">æœ€é«˜åˆ†</span>
            </div>
          </div>
          <div class="whack-grid" id="whack-grid">
            <!-- åœ°é¼ æ´å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </div>
          <div class="whack-controls">
            <button class="whack-btn" id="whack-start">å¼€å§‹æ¸¸æˆ</button>
            <button class="whack-btn" id="whack-reset" style="background: rgba(255, 87, 87, 0.8);">é‡æ–°å¼€å§‹</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ç²’å­èƒŒæ™¯ç”»å¸ƒ -->
  <canvas id="cas"></canvas>

  <script>
    // ç²’å­èƒŒæ™¯ä»£ç  (ä¿æŒä¸å˜)
    var canvas = document.getElementById("cas");
    var ctx = canvas.getContext("2d");

    resize();
    window.onresize = resize;

    function resize() {
      canvas.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
      canvas.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
    }

    var RAF = (function() {
      return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
    })();

    var warea = {x: null, y: null, max: 20000};
    window.onmousemove = function(e) {
      e = e || window.event;

      warea.x = e.clientX;
      warea.y = e.clientY;
    };
    window.onmouseout = function(e) {
      warea.x = null;
      warea.y = null;
    };

    var dots = [];
    for (var i = 0; i < 1204; i++) {
      var x = Math.random() * canvas.width;
      var y = Math.random() * canvas.height;
      var xa = Math.random() * 2 - 1;
      var ya = Math.random() * 2 - 1;

      dots.push({
        x: x,
        y: y,
        xa: xa,
        ya: ya,
        max: 1204
      });
    }

    setTimeout(function() {
      animate();
    }, 100);

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      var ndots = [warea].concat(dots);

      dots.forEach(function(dot) {
        dot.x += dot.xa;
        dot.y += dot.ya;

        dot.xa *= (dot.x > canvas.width || dot.x < 0) ? -1 : 1;
        dot.ya *= (dot.y > canvas.height || dot.y < 0) ? -1 : 1;

        ctx.fillStyle = 'rgba(79, 192, 141, 0.7)';
        ctx.fillRect(dot.x - 0.5, dot.y - 0.5, 1, 1);

        for (var i = 0; i < ndots.length; i++) {
          var d2 = ndots[i];

          if (dot === d2 || d2.x === null || d2.y === null) continue;

          var xc = dot.x - d2.x;
          var yc = dot.y - d2.y;

          var dis = xc * xc + yc * yc;

          var ratio;

          if (dis < d2.max) {
            if (d2 === warea && dis > (d2.max / 2)) {
              dot.x -= xc * 0.03;
              dot.y -= yc * 0.03;
            }

            ratio = (d2.max - dis) / d2.max;

            ctx.beginPath();
            ctx.lineWidth = ratio / 2;
            ctx.strokeStyle = 'rgba(79,192,141,' + (ratio + 0.2) + ')';
            ctx.moveTo(dot.x, dot.y);
            ctx.lineTo(d2.x, d2.y);
            ctx.stroke();
          }
        }

        ndots.splice(ndots.indexOf(dot), 1);
      });

      RAF(animate);
    }
    
    // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const tabId = btn.getAttribute('data-tab');
        
        // ç§»é™¤æ‰€æœ‰activeç±»
        tabBtns.forEach(b => b.classList.remove('active'));
        tabContents.forEach(c => c.classList.remove('active'));
        
        // æ·»åŠ activeç±»
        btn.classList.add('active');
        document.getElementById(`${tabId}-tab`).classList.add('active');
      });
    });
    
    // æ¸¸æˆåˆ‡æ¢åŠŸèƒ½
    const gameBtns = document.querySelectorAll('.game-btn');
    const gameContainers = document.querySelectorAll('.game-container');
    
    gameBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const gameId = btn.getAttribute('data-game');
        
        // ç§»é™¤æ‰€æœ‰activeç±»
        gameBtns.forEach(b => b.classList.remove('active'));
        gameContainers.forEach(c => c.classList.remove('active'));
        
        // æ·»åŠ activeç±»
        btn.classList.add('active');
        document.getElementById(`${gameId}-game`).classList.add('active');
      });
    });
    
    // å…ƒæ—¦æ™šä¼šå€’è®¡æ—¶åŠŸèƒ½
    function updateCountdown() {
      const eventDate = new Date('December 31, 2024 19:00:00').getTime();
      const now = new Date().getTime();
      const timeLeft = eventDate - now;
      
      if (timeLeft < 0) {
        document.getElementById('days').textContent = '00';
        document.getElementById('hours').textContent = '00';
        document.getElementById('minutes').textContent = '00';
        document.getElementById('seconds').textContent = '00';
        return;
      }
      
      const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
      const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
      
      document.getElementById('days').textContent = days.toString().padStart(2, '0');
      document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
      document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
      document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
    }
    
    // èŠ‚ç›®å•æ•°æ®
    const programs = [
      { time: "18:30-18:50", name: "æš–åœºè§†é¢‘æ’­æ”¾", performer: "æŠ€æœ¯ç»„" },
      { time: "19:00-19:10", name: "å¼€åœºèˆè¹ˆã€Šé’æ˜¥é£æ‰¬ã€‹", performer: "èˆè¹ˆç¤¾" },
      { time: "19:15-19:30", name: "æ ¡é•¿æ–°å¹´è‡´è¾", performer: "æ ¡é•¿" },
      { time: "19:35-19:50", name: "å°å“ã€Šè¯¾é—´ååˆ†é’Ÿã€‹", performer: "é«˜äºŒ(3)ç­" },
      { time: "19:55-20:15", name: "ä¹é˜Ÿè¡¨æ¼”ã€Šå¤œç©ºä¸­æœ€äº®çš„æ˜Ÿã€‹", performer: "æ ¡å›­ä¹é˜Ÿ" },
      { time: "20:20-20:40", name: "é­”æœ¯è¡¨æ¼”", performer: "ç¥ç§˜å˜‰å®¾" },
      { time: "20:45-21:05", name: "æ­Œæ›²ä¸²çƒ§", performer: "æ ¡å›­æ­Œæ‰‹" },
      { time: "21:10-21:30", name: "äº’åŠ¨æ¸¸æˆç¯èŠ‚", performer: "ä¸»æŒäºº" },
      { time: "21:35-22:00", name: "å‹è½´èˆè¹ˆã€Šæ–°å¹´å¿«ä¹ã€‹", performer: "å…¨ä½“æ¼”å‘˜" }
    ];
    
    // æ¸²æŸ“èŠ‚ç›®å•
    function renderProgramList() {
      const programList = document.getElementById('programList');
      programList.innerHTML = '';
      
      programs.forEach((program, index) => {
        const li = document.createElement('li');
        li.className = 'program-item';
        
        const currentHour = new Date().getHours();
        const programHour = parseInt(program.time.split(':')[0]);
        if (Math.abs(currentHour - programHour) <= 1) {
          li.classList.add('active');
        }
        
        li.innerHTML = `
          <div class="program-time">${program.time}</div>
          <div class="program-name">${program.name}</div>
          <div class="program-performer">è¡¨æ¼”è€…ï¼š${program.performer}</div>
        `;
        
        programList.appendChild(li);
      });
    }
    
    // é¢æ¿æ§åˆ¶åŠŸèƒ½
    const panelToggle = document.getElementById('panelToggle');
    const slidePanel = document.getElementById('slidePanel');
    const closePanel = document.getElementById('closePanel');
    
    panelToggle.addEventListener('click', () => {
      slidePanel.classList.add('active');
    });
    
    closePanel.addEventListener('click', () => {
      slidePanel.classList.remove('active');
    });
    
    document.addEventListener('click', (e) => {
      if (!slidePanel.contains(e.target) && e.target !== panelToggle) {
        slidePanel.classList.remove('active');
      }
    });
    
    // çŒœæ•°å­—æ¸¸æˆé€»è¾‘
    let targetNumber = Math.floor(Math.random() * 100) + 1;
    let guessCount = 0;
    let guessHistory = [];
    
    document.getElementById('guess-submit').addEventListener('click', makeGuess);
    document.getElementById('guess-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') makeGuess();
    });
    
    document.getElementById('guess-restart').addEventListener('click', () => {
      targetNumber = Math.floor(Math.random() * 100) + 1;
      guessCount = 0;
      guessHistory = [];
      document.getElementById('guess-message').textContent = 'æ–°æ¸¸æˆå·²å¼€å§‹ï¼çŒœä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ã€‚';
      document.getElementById('guess-history').innerHTML = '';
      document.getElementById('guess-input').value = '';
      document.getElementById('guess-input').focus();
    });
    
    function makeGuess() {
      const input = document.getElementById('guess-input');
      const guess = parseInt(input.value);
      const message = document.getElementById('guess-message');
      const history = document.getElementById('guess-history');
      
      if (isNaN(guess) || guess < 1 || guess > 100) {
        message.innerHTML = '<span style="color: rgba(255, 100, 100, 0.9);">è¯·è¾“å…¥1-100ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—ï¼</span>';
        input.value = '';
        input.focus();
        return;
      }
      
      guessCount++;
      guessHistory.push(guess);
      
      let historyHTML = '';
      guessHistory.forEach((g, i) => {
        const diff = Math.abs(g - targetNumber);
        let color = 'rgba(255, 100, 100, 0.9)';
        if (diff <= 5) color = 'rgba(255, 200, 100, 0.9)';
        if (diff <= 2) color = 'rgba(100, 255, 100, 0.9)';
        
        historyHTML += `<div class="history-item" style="border-left-color: ${color};">ç¬¬${i+1}æ¬¡: ${g}</div>`;
      });
      
      history.innerHTML = historyHTML;
      
      if (guess === targetNumber) {
        message.innerHTML = `<span style="color: rgba(79, 192, 141, 1); font-weight: bold;">æ­å–œï¼ä½ çŒœå¯¹äº†ï¼æ•°å­—å°±æ˜¯${targetNumber}ã€‚<br>ä½ ç”¨äº†${guessCount}æ¬¡çŒœä¸­ï¼</span>`;
      } else if (guess < targetNumber) {
        message.innerHTML = `<span style="color: rgba(255, 200, 100, 0.9);">çŒœå°äº†ï¼è¯•è¯•æ›´å¤§çš„æ•°å­—ã€‚<br>ä½ å·²ç»çŒœäº†${guessCount}æ¬¡ã€‚</span>`;
      } else {
        message.innerHTML = `<span style="color: rgba(255, 200, 100, 0.9);">çŒœå¤§äº†ï¼è¯•è¯•æ›´å°çš„æ•°å­—ã€‚<br>ä½ å·²ç»çŒœäº†${guessCount}æ¬¡ã€‚</span>`;
      }
      
      input.value = '';
      input.focus();
    }
    
    // ååº”æµ‹è¯•æ¸¸æˆé€»è¾‘
    let reactionStartTime = 0;
    let reactionTimes = [];
    let reactionWaiting = false;
    let reactionTimeout = null;
    
    const reactionBtn = document.getElementById('reaction-btn');
    const reactionTimeEl = document.getElementById('reaction-time');
    const reactionAverageEl = document.getElementById('reaction-average');
    const reactionCountEl = document.getElementById('reaction-count');
    
    reactionBtn.addEventListener('click', handleReactionClick);
    document.getElementById('reaction-reset').addEventListener('click', resetReactionStats);
    
    function startReactionTest() {
      reactionBtn.textContent = 'ç­‰å¾…...';
      reactionBtn.classList.remove('active');
      reactionWaiting = true;
      
      // éšæœºç­‰å¾…æ—¶é—´ï¼š1-3ç§’
      const waitTime = Math.random() * 2000 + 1000;
      
      reactionTimeout = setTimeout(() => {
        reactionBtn.textContent = 'ç‚¹å‡»ï¼';
        reactionBtn.classList.add('active');
        reactionStartTime = Date.now();
        reactionWaiting = false;
      }, waitTime);
    }
    
    function handleReactionClick() {
      if (reactionWaiting) {
        // ç‚¹å‡»è¿‡æ—©
        clearTimeout(reactionTimeout);
        reactionBtn.textContent = 'å¤ªå¿«äº†ï¼é‡æ–°å¼€å§‹...';
        reactionBtn.classList.remove('active');
        setTimeout(startReactionTest, 1500);
        return;
      }
      
      if (reactionStartTime === 0) {
        // ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œå¼€å§‹æ¸¸æˆ
        startReactionTest();
        return;
      }
      
      const reactionTime = Date.now() - reactionStartTime;
      reactionTimes.push(reactionTime);
      
      updateReactionStats();
      
      // å‡†å¤‡ä¸‹ä¸€æ¬¡æµ‹è¯•
      reactionBtn.textContent = `${reactionTime} msï¼Œç»§ç»­...`;
      reactionBtn.classList.remove('active');
      reactionStartTime = 0;
      
      setTimeout(startReactionTest, 1000);
    }
    
    function updateReactionStats() {
      const fastest = Math.min(...reactionTimes);
      const average = Math.round(reactionTimes.reduce((a, b) => a + b, 0) / reactionTimes.length);
      
      reactionTimeEl.textContent = fastest;
      reactionAverageEl.textContent = average;
      reactionCountEl.textContent = reactionTimes.length;
      
      // ä¿å­˜æœ€é«˜è®°å½•åˆ°localStorage
      const savedFastest = localStorage.getItem('reactionFastest');
      if (!savedFastest || fastest < savedFastest) {
        localStorage.setItem('reactionFastest', fastest);
      }
    }
    
    function resetReactionStats() {
      reactionTimes = [];
      reactionStartTime = 0;
      reactionBtn.textContent = 'ç­‰å¾…...';
      reactionBtn.classList.remove('active');
      reactionTimeEl.textContent = '0';
      reactionAverageEl.textContent = '0';
      reactionCountEl.textContent = '0';
      clearTimeout(reactionTimeout);
      
      setTimeout(startReactionTest, 500);
    }
    
    // æ‰“åœ°é¼ æ¸¸æˆé€»è¾‘
    let whackScore = 0;
    let whackTimeLeft = 30;
    let whackTimer = null;
    let whackGameActive = false;
    let whackMoles = [];
    let whackHighScore = localStorage.getItem('whackHighScore') || 0;
    
    document.getElementById('whack-highscore').textContent = whackHighScore;
    document.getElementById('whack-start').addEventListener('click', startWhackGame);
    document.getElementById('whack-reset').addEventListener('click', resetWhackGame);
    
    // åˆ›å»ºåœ°é¼ æ´
    const whackGrid = document.getElementById('whack-grid');
    for (let i = 0; i < 9; i++) {
      const hole = document.createElement('div');
      hole.className = 'whack-hole';
      hole.innerHTML = '<div class="whack-mole"></div>';
      hole.addEventListener('click', () => whackMole(i));
      whackGrid.appendChild(hole);
      whackMoles.push({
        element: hole.querySelector('.whack-mole'),
        active: false,
        timer: null
      });
    }
    
    function startWhackGame() {
      if (whackGameActive) return;
      
      whackGameActive = true;
      whackScore = 0;
      whackTimeLeft = 30;
      document.getElementById('whack-score').textContent = whackScore;
      document.getElementById('whack-time').textContent = whackTimeLeft;
      document.getElementById('whack-start').disabled = true;
      
      // å¯åŠ¨è®¡æ—¶å™¨
      whackTimer = setInterval(() => {
        whackTimeLeft--;
        document.getElementById('whack-time').textContent = whackTimeLeft;
        
        if (whackTimeLeft <= 0) {
          endWhackGame();
        }
      }, 1000);
      
      // å¼€å§‹åœ°é¼ å‡ºç°
      startMoleAppearance();
    }
    
    function startMoleAppearance() {
      if (!whackGameActive) return;
      
      // éšæœºé€‰æ‹©ä¸€ä¸ªåœ°é¼ å‡ºç°
      const randomIndex = Math.floor(Math.random() * whackMoles.length);
      showMole(randomIndex);
      
      // è®¾ç½®ä¸‹ä¸€æ¬¡åœ°é¼ å‡ºç°çš„æ—¶é—´ï¼ˆ0.5-1.5ç§’ï¼‰
      const nextTime = Math.random() * 1000 + 500;
      setTimeout(startMoleAppearance, nextTime);
    }
    
    function showMole(index) {
      if (!whackGameActive || whackMoles[index].active) return;
      
      whackMoles[index].active = true;
      whackMoles[index].element.classList.add('active');
      
      // åœ°é¼ è‡ªåŠ¨æ¶ˆå¤±æ—¶é—´ï¼ˆ0.8-1.5ç§’ï¼‰
      const hideTime = Math.random() * 700 + 800;
      whackMoles[index].timer = setTimeout(() => {
        hideMole(index);
      }, hideTime);
    }
    
    function hideMole(index) {
      if (!whackMoles[index].active) return;
      
      whackMoles[index].active = false;
      whackMoles[index].element.classList.remove('active');
      clearTimeout(whackMoles[index].timer);
    }
    
    function whackMole(index) {
      if (!whackMoles[index].active || !whackGameActive) return;
      
      // å‡»ä¸­åœ°é¼ 
      whackScore++;
      document.getElementById('whack-score').textContent = whackScore;
      
      // éšè—åœ°é¼ 
      hideMole(index);
      
      // æ·»åŠ å‡»ä¸­æ•ˆæœ
      whackMoles[index].element.style.backgroundColor = 'rgba(255, 100, 100, 0.9)';
      setTimeout(() => {
        if (whackMoles[index]) {
          whackMoles[index].element.style.backgroundColor = '';
        }
      }, 200);
    }
    
    function endWhackGame() {
      whackGameActive = false;
      clearInterval(whackTimer);
      document.getElementById('whack-start').disabled = false;
      
      // éšè—æ‰€æœ‰åœ°é¼ 
      whackMoles.forEach((mole, index) => {
        hideMole(index);
      });
      
      // æ›´æ–°æœ€é«˜åˆ†
      if (whackScore > whackHighScore) {
        whackHighScore = whackScore;
        localStorage.setItem('whackHighScore', whackHighScore);
        document.getElementById('whack-highscore').textContent = whackHighScore;
      }
      
      // æ˜¾ç¤ºæ¸¸æˆç»“æŸæ¶ˆæ¯
      alert(`æ¸¸æˆç»“æŸï¼\nä½ çš„å¾—åˆ†ï¼š${whackScore}\næœ€é«˜åˆ†ï¼š${whackHighScore}`);
    }
    
    function resetWhackGame() {
      endWhackGame();
      whackScore = 0;
      whackTimeLeft = 30;
      document.getElementById('whack-score').textContent = whackScore;
      document.getElementById('whack-time').textContent = whackTimeLeft;
      whackHighScore = localStorage.getItem('whackHighScore') || 0;
      document.getElementById('whack-highscore').textContent = whackHighScore;
    }
    
    // åˆå§‹åŒ–å€’è®¡æ—¶å’ŒèŠ‚ç›®å•
    updateCountdown();
    renderProgramList();
    
    // æ¯ç§’æ›´æ–°ä¸€æ¬¡å€’è®¡æ—¶
    setInterval(updateCountdown, 1000);
    
    // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡èŠ‚ç›®å•çŠ¶æ€
    setInterval(renderProgramList, 60000);
    
    // æ·»åŠ é”®ç›˜å¿«æ·é”®ï¼šæŒ‰ESCå…³é—­é¢æ¿
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        slidePanel.classList.remove('active');
      }
    });
    
    // åˆå§‹åŒ–ååº”æµ‹è¯•æ¸¸æˆ
    setTimeout(startReactionTest, 2000);
  </script>
</body>
</html>
